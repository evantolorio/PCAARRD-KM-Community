{"version":3,"sources":["../../../src/shared/controller/shared.server.controller.js"],"names":["sharedControls","uploadFile","req","res","err","code","json","success","message","file","uploader","upload","path","result","error","uploadImage","image"],"mappings":"oEAAA,+gB,wEAIA,GAAMA,gBAAiB,CACtBC,WAAY,wBAAc,CACvB,4CAAiBC,CAAjB,CAAsBC,CAAtB,CAA2B,WAAS,CAC5BC,CAD4B,CAEX,iBAAb,KAAIC,IAFoB,CAGxBF,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAAS,4CAA3B,CAAT,CAHwB,CAKxBL,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAAS,wBAA3B,CAAT,CALwB,CAQvBN,EAAIO,IARmB,CAWxB,uCAAiBC,QAAjB,CAA0BC,MAA1B,CAAiCT,EAAIO,IAAJ,CAASG,IAA1C,CAAgD,WAAY,CACpDC,EAAOC,KAD6C,CAEnDX,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAASK,EAAOC,KAAP,CAAaN,OAAxC,CAAT,CAFmD,CAIrDL,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAiBC,QAAS,gBAA1B,CAA4CC,KAAMI,CAAlD,CAAT,CAEP,CANA,CAXwB,CASxBV,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAAS,uBAA3B,CAAT,CAWX,CApBD,CAqBD,CAvBoB,CAwBrBO,YAAa,yBAAc,CACzB,4CAAkBb,CAAlB,CAAuBC,CAAvB,CAA4B,WAAS,CAC7BC,CAD6B,CAEZ,iBAAb,KAAIC,IAFqB,CAGzBF,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAAS,4CAA3B,CAAT,CAHyB,CAKzBL,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAAS,yBAA3B,CAAT,CALyB,CAQxBN,EAAIO,IARoB,CAWzB,uCAAiBC,QAAjB,CAA0BC,MAA1B,CAAiCT,EAAIO,IAAJ,CAASG,IAA1C,CAAgD,WAAY,CACpDC,EAAOC,KAD6C,CAEnDX,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAASK,EAAOC,KAAP,CAAaN,OAAxC,CAAT,CAFmD,CAIrDL,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAiBC,QAAS,gBAA1B,CAA4CQ,MAAOH,CAAnD,CAAT,CAEP,CANA,CAXyB,CASzBV,EAAIG,IAAJ,CAAS,CAAEC,UAAF,CAAkBC,QAAS,wBAA3B,CAAT,CAWX,CApBD,CAqBD,CA9CoB,CAAvB,C,gBAkDeR,c","file":"shared.server.controller.js","sourcesContent":["import multerFileUpload from '../config/shared.server.multer-files-config.js';\nimport multerImageUpload from '../config/shared.server.multer-image-config.js';\nimport cloudinaryConfig from '../config/shared.server.cloudinary-config.js';\n\nconst sharedControls = { \n\tuploadFile: (req, res) => {\n\t   multerFileUpload(req, res, (err) => {\n        if (err) {\n            if (err.code === 'LIMIT_FILE_SIZE') {\n                res.json({ success: false, message: 'File size is too large. Max limit is 20MB.' });\n            } else {\n                res.json({ success: false, message: 'Unable to upload file.' });\n            }\n        } else {\n            if (!req.file) {\n                res.json({ success: false, message: 'No file was selected.' });\n            } else {\n                cloudinaryConfig.uploader.upload(req.file.path, (result) => {\n                    if (result.error){\n                         res.json({ success: false, message: result.error.message});\n                    } else {\n                       res.json({ success: true, message: 'File uploaded!', file: result}); \n                    }\n               });\n            }\n        }\n    });\n  },\n  uploadImage: (req, res) => {\n    multerImageUpload(req, res, (err) => {\n        if (err) {\n            if (err.code === 'LIMIT_FILE_SIZE') {\n                res.json({ success: false, message: 'File size is too large. Max limit is 10MB.' });\n            } else {\n                res.json({ success: false, message: 'Unable to upload photo.' });\n            }\n        } else {\n            if (!req.file) {\n                res.json({ success: false, message: 'No photo was selected.' });\n            } else {\n                cloudinaryConfig.uploader.upload(req.file.path, (result) => {   // only accepts image\n                    if (result.error){\n                         res.json({ success: false, message: result.error.message});\n                    } else {\n                       res.json({ success: true, message: 'File uploaded!', image: result}); \n                    }\n               });\n            }\n        }\n    });\n  }\n}\n\n\nexport default sharedControls;"]}